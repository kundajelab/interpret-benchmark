[
    {
        "message": "trial model",
        "model_trainer":{
            "class": "keras_model_trainer.KerasFitGeneratorModelTrainer",
            "kwargs": {
                "seed": 1234,
                "samples_per_epoch": 30,
                "stopping_criterion_config": {
                    "class": "EarlyStopping" ,
                    "kwargs": {
                       "max_epochs": 100,
                       "epochs_to_wait": 100
                    }
                },
            }
        },
        "model_creator":{
            "class": "flexible_keras.FlexibleKerasSequential",
            "kwargs": {
                "layers_config": [
                    {
                        "class": "keras.layers.Conv1D",
                        "kwargs": {
                            "input_shape": [400,4],
                            "nb_filter": 15,
                            "filter_length": 5,
                            "kernel_initializer": "he_uniform",
                            "border_mode": "same",
                        }
                    },
                    {
                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "relu"}
                    },
                    {
                        "class": "keras.layers.Conv1D",
                        "kwargs": {
                            "nb_filter": 15,
                            "filter_length": 5,
                            "kernel_initializer": "he_uniform",
                            "border_mode": "same",
                        }
                    },
                    {
                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "relu"}
                    },
                    {
                        "class": "keras.layers.Conv1D",
                        "kwargs": {
                            "nb_filter": 15,
                            "filter_length": 5,
                            "kernel_initializer": "he_uniform",
                            "border_mode": "same",
                        }
                    },
                    {
                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "relu"}
                    },
                    {
                        "class": "keras.layers.Conv1D",
                        "kwargs": {
                            "nb_filter": 15,
                            "filter_length": 5,
                            "kernel_initializer": "he_uniform",
                            "border_mode": "same",
                        }
                    },
                    {
                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "relu"}
                    },
                    {
                        "class": "keras.layers.Conv1D",
                        "kwargs": {
                            "nb_filter": 15,
                            "filter_length": 5,
                            "kernel_initializer": "he_uniform",
                            "border_mode": "same",
                        }
                    },
                    {
                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "relu"}
                    },
                    {
                        "class": "keras.layers.MaxPooling1D",
                        "kwargs": {"pool_length": 40, "stride": 40}
                    },
                    {
                        "class": "keras.layers.Flatten",
                        "kwargs": {}
                    },
                    {
                        "class": "keras.layers.Dense",
                        "kwargs": {"units": 50,
                                   "kernel_initializer": "he_uniform"}
                    },
                    {
                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "relu"}
                    },
                    #{
                    #    "name": "fc1_batchnorm",
                    #    "class": "keras.layers.normalization.BatchNormalization",
                    #    "kwargs": {
                    #    "axis": -1
                    #    }
                    #},
                    #{
                    #    "name": "fc1_dropout",
                    #    "class": "keras.layers.core.Dropout",
                    #    "kwargs": {
                    #    "p": 0.2
                    #    }
                    #},
                    {
                        # FC dense layer 2
                        "class": "keras.layers.core.Dense",
                        "kwargs": {"output_dim": 1}
                    },
                    {

                        "class": "keras.layers.core.Activation",
                        "kwargs": {"activation": "sigmoid"}
                    }
                ],
                "optimizer_config": {
                    "class": "keras.optimizers.Adam",
                    "kwargs": {"lr": 0.001}
                },
                "loss": "binary_crossentropy" 
            }
        },
        "other_data_loaders":{
            "train": {
                "class": "fasta_inmemory_data_loader.TwoStreamSeqOnly",
                "kwargs": {
                   "batch_size": 100,
                   "positives_fasta_source": "sequences/train_sim_positives.txt.gz",
                   "negatives_fasta_source": "sequences/train_sim_negatives.txt.gz",
                   "fasta_col": 1,
                   "negatives_to_positives_ratio": 3,
                   "rc_augment": true,
                   "num_to_load_for_eval": 5000, 
                   "labels_dtype": "int",
                   "pre_onehot": true
                }
            }
        },
    }
]
